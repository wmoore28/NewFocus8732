#
# NewFocus8732.db
#
record(stringin,"$(P)$(R)resp")
{
    field(DESC,"Generic command response")
    field(DTYP,"stream")
    field(VAL,"string")
    field(INP,"@NewFocus8732.proto readResp $(PORT)")
}

record(ao,"$(P)$(R)freq")
{
    field(DESC,"Set frequency")
    field(DTYP,"stream")
    field(OUT,"@NewFocus8732.proto setFreq $(PORT)")
    field(OMSL,"closed_loop")
    field(OIF,"Full")
    field(PREC,"3")
    field(EGU,"Hz")
}

record(ai,"$(P)$(R)get_freq")
{
    field(DESC,"Get frequency")
    field(DTYP,"stream")
    field(INP,"@NewFocus8732.proto getFreq $(PORT)")
    field(PREC,"3")
    field(EGU,"Hz")
    field(SCAN, "1 second")
}

record(ao,"$(P)$(R)period")
{
    field(DESC,"Set period")
    field(DTYP,"stream")
    field(OUT,"@NewFocus8732.proto setPer $(PORT)")
    field(OMSL,"closed_loop")
    field(OIF,"Full")
    field(PREC,"4")
    field(EGU,"s")
}

record(ai,"$(P)$(R)get_period")
{
    field(DESC,"Get period")
    field(DTYP,"stream")
    field(INP,"@NewFocus8732.proto getPer $(PORT)")
    field(PREC,"4")
    field(EGU,"s")
    field(SCAN, "1 second")
}

record(longout,"$(P)$(R)steps")
{
    field(DESC,"Set steps")
    field(DTYP,"stream")
    field(OUT,"@NewFocus8732.proto setSteps $(PORT)")
    field(OMSL,"closed_loop")
    field(EGU,"units")
}

record(longout,"$(P)$(R)chan")
{
    field(DESC,"Set channel number")
    field(DTYP,"stream")
    field(OUT,"@NewFocus8732.proto setChan $(PORT)")
    field(OMSL,"closed_loop")
    field(EGU,"units")
}

record(longin,"$(P)$(R)get_chan")
{
    field(DESC,"Get channel number")
    field(DTYP,"stream")
    field(INP,"@NewFocus8732.proto getChan $(PORT)")
    field(SCAN, "1 second")
}

record(bo,"$(P)$(R)dir")
{
    field(DESC,"Set direction")
    field(DTYP,"stream")
    field(OMSL,"closed_loop")
    field(DOL,"0")
    field(OUT,"@NewFocus8732.proto setDirection $(PORT)")
    field(ZNAM,"CCW")
    field(ONAM,"CW")
}

record(bi,"$(P)$(R)get_dir")
{
    field(DESC,"Get direction")
    field(DTYP,"stream")
    field(INP,"@NewFocus8732.proto getDirection $(PORT)")
    field(ZNAM,"CCW")
    field(ONAM,"CW")
    field(SCAN,"1 second")
}

record(bo,"$(P)$(R)onoff")
{
    field(DESC,"Channel on/off")
    field(DTYP,"stream")
    field(OMSL,"closed_loop")
    field(DOL,"1")
    field(OUT,"@NewFocus8732.proto setOnOff $(PORT)")
}

#record(stringin,"$(P)$(R)mvstat")
record(ai,"$(P)$(R)mvstat")
{
    field(DESC,"Move status")
    field(DTYP,"stream")
#    field(VAL,"string")
    field(INP,"@NewFocus8732.proto readMStatus $(PORT)")
    field(SCAN, "1 second")
}

record(stringout,"$(P)$(R)cmd")
{
    field(DESC,"Generic Command")
    field(DTYP,"stream")
    field(FLNK,"$(P)$(R)resp.VAL")
    field(VAL,"string")
    field(OMSL,"supervisory")
    field(OUT,"@NewFocus8732.proto setCmd $(PORT)")
}

record(bo,"$(P)$(R)reset")
{
    field(DESC,"Reset")
    field(DTYP,"stream")
    field(OMSL,"supervisory")
    field(OUT,"@NewFocus8732.proto setReset $(PORT)")
}

# Also used as a keep-alive for using a ICS 8065
record(stringin,"$(P)$(R)instr_id")
{
    field(DESC,"Instrument Identification")
    field(DTYP,"stream")
    field(INP,"@NewFocus8732.proto readID $(PORT)")
    field(PINI,"YES")
    field(SCAN, "Passive")
}

record(bi, "$(P)$(R)op_cmplt")
{
    field(DESC, "Operation complete")
    field(DTYP, "stream")
    field(INP,  "@NewFocus8732.proto readOPC $(PORT)")
    field(PINI, "YES")
    field(SCAN, ".1 second")
    field(ZNAM, "In progress")
    field(ONAM, "Complete")
}

